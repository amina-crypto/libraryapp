<nav class="navbar is-primary is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <%= link_to root_path, class: "navbar-item" do %>
      <span class="icon">
        <i class="fas fa-book-reader fa-lg"></i>
      </span>
      <span class="has-text-weight-bold ml-2">Library System</span>
    <% end %>

    <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="mainNavbar">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>

  <div id="mainNavbar" class="navbar-menu">
    <div class="navbar-start">
      <%= link_to "Home", root_path, class: "navbar-item" %>
      
      <%= link_to books_path, class: "navbar-item" do %>
        <span class="icon-text">
          <span class="icon"><i class="fas fa-book"></i></span>
          <span>Books</span>
        </span>
      <% end %>

      <%= link_to journals_path, class: "navbar-item" do %>
        <span class="icon-text">
          <span class="icon"><i class="fas fa-newspaper"></i></span>
          <span>Journals</span>
        </span>
      <% end %>

      <%= link_to search_path, class: "navbar-item" do %>
        <span class="icon-text">
          <span class="icon"><i class="fas fa-search"></i></span>
          <span>Search</span>
        </span>
      <% end %>

      <% if user_signed_in? %>
        <% if current_user.library_personnel? %>
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link">
              Management
            </a>

            <div class="navbar-dropdown">
              <%= link_to personnel_loans_path, class: "navbar-item" do %>
                <span class="icon-text">
                  <span class="icon"><i class="fas fa-book-reader"></i></span>
                  <span>Loans</span>
                </span>
              <% end %>

              <%= link_to personnel_reservations_path, class: "navbar-item" do %>
                <span class="icon-text">
                  <span class="icon"><i class="fas fa-bookmark"></i></span>
                  <span>Reservations</span>
                </span>
              <% end %>

              <%= link_to personnel_users_path, class: "navbar-item" do %>
                <span class="icon-text">
                  <span class="icon"><i class="fas fa-users"></i></span>
                  <span>Users</span>
                </span>
              <% end %>

              <%= link_to personnel_categories_path, class: "navbar-item" do %>
                <span class="icon-text">
                  <span class="icon"><i class="fas fa-tags"></i></span>
                  <span>Categories</span>
                </span>
              <% end %>

              <%= link_to personnel_statistics_path, class: "navbar-item" do %>
                <span class="icon-text">
                  <span class="icon"><i class="fas fa-chart-bar"></i></span>
                  <span>Statistics</span>
                </span>
              <% end %>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>

    <div class="navbar-end">
      <% if user_signed_in? %>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">
            <span class="icon-text">
              <span class="icon"><i class="fas fa-user"></i></span>
              <span><%= current_user.name %></span>
            </span>
          </a>

          <div class="navbar-dropdown is-right">
            <%= link_to user_profile_path, class: "navbar-item" do %>
              <span class="icon-text">
                <span class="icon"><i class="fas fa-user-circle"></i></span>
                <span>Profile</span>
              </span>
            <% end %>

            <% unless current_user.library_personnel? %>
              <%= link_to user_loans_path, class: "navbar-item" do %>
                <span class="icon-text">
                  <span class="icon"><i class="fas fa-book-reader"></i></span>
                  <span>My Loans</span>
                </span>
              <% end %>

              <%= link_to user_reservations_path, class: "navbar-item" do %>
                <span class="icon-text">
                  <span class="icon"><i class="fas fa-bookmark"></i></span>
                  <span>My Reservations</span>
                </span>
              <% end %>

              <%= link_to user_fines_path, class: "navbar-item" do %>
                <span class="icon-text">
                  <span class="icon"><i class="fas fa-money-bill"></i></span>
                  <span>My Fines</span>
                </span>
              <% end %>
            <% end %>

            <hr class="navbar-divider">

            <%= button_to destroy_user_session_path, 
                method: :delete, 
                class: "navbar-item button is-white is-fullwidth" do %>
              <span class="icon-text">
                <span class="icon"><i class="fas fa-sign-out-alt"></i></span>
                <span>Logout</span>
              </span>
            <% end %>
          </div>
        </div>
      <% else %>
        <div class="navbar-item">
          <div class="buttons">
            <%= link_to new_user_registration_path, class: "button is-primary" do %>
              <span class="icon">
                <i class="fas fa-user-plus"></i>
              </span>
              <span>Sign up</span>
            <% end %>

            <%= link_to new_user_session_path, class: "button is-light" do %>
              <span class="icon">
                <i class="fas fa-sign-in-alt"></i>
              </span>
              <span>Log in</span>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</nav> 