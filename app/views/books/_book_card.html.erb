<div class="column is-one-third-desktop is-half-tablet">
  <div class="card">
    <div class="card-image">
      <figure class="image is-4by3">
        <% if book.cover_image.attached? %>
          <%= image_tag book.cover_image %>
        <% else %>
          <img src="https://bulma.io/images/placeholders/1280x960.png" alt="Book cover">
        <% end %>
      </figure>
    </div>
    
    <div class="card-content">
      <p class="title is-4"><%= book.title %></p>
      <p class="subtitle is-6">by <%= book.author %></p>
      
      <div class="content">
        <p><%= truncate(book.description, length: 100) if book.description %></p>
        <div class="tags">
          <span class="tag is-primary"><%= book.category.name %></span>
          <span class="tag is-info"><%= book.language %></span>
          <% if book.available? %>
            <span class="tag is-success">Available</span>
          <% else %>
            <span class="tag is-danger">Unavailable</span>
          <% end %>
        </div>
      </div>
    </div>
    
    <footer class="card-footer">
      <%= link_to "View Details", book_path(book), class: "card-footer-item" %>
      <% if book.available? && user_signed_in? %>
        <%= link_to "Reserve", new_reservation_path(book_id: book.id), class: "card-footer-item" %>
      <% end %>
    </footer>
  </div>
</div> 